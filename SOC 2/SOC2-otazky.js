const questionnaireData = {
    "sections": [
        {
            "id": "section1",
            "title": "Kritérium: Bezpečnost (Common criteria)",
            "subsections": [
                {
                    "id": "CC1.1",
                    "title": "Kontrola prostředí (CC1.1)",
                    "questions": [
                        {
                            "id": "CC1.1",
                            "text": "Organizace prokazuje závazek k integritě a etickým hodnotám?",
                            "comment": "Je vytvořen etický kodex, který je sdělován všem zaměstnancům a jeho dodržování je pravidelně revidováno.",
                            "response": null
                        },
                        {
                            "id": "CC1.2",
                            "text": "Představenstvo prokazuje nezávislost na vedení a vykonává dohled nad vývojem a výkonem vnitřní kontroly?",
                            "comment": "",
                            "response": null
                        },
                        {
                            "id": "CC1.3",
                            "text": "Stanovuje vedení společnosti, pod dohledem představentsva, struktury, hlášení a odpovídající pravomoci a odpovědnosti pro dosahování cílů?",
                            "comment": "",
                            "response": null
                        },
                        {
                            "id": "CC1.4",
                            "text": "Prosazuje organizace metody pro získání, rozvíjení a udržení kompetentních osob?",
                            "comment": "Např. formou školení stávajícíh zaměstnanců.",
                            "response": null
                        },
                        {
                            "id": "CC1.5",
                            "text": "Vede organizace jednotlivce k odpovědnosti za jejich povinnosti v oblasti vnitřní kontroly?",
                            "comment": "",
                            "response": null
                        },
                    ]
                },
                {
                    "id": "CC2",
                    "title": "Komunikace a informace (CC2)",
                    "questions": [
                        {
                            "id": "CC2.1",
                            "text": "Má organizace zavedeny postupy pro zjišťování a získávání potřebných informací na podporu fungování vnitřní kontroly?",
                            "comment": "To může zahrnovat postupy pro shromažďování a ověřování finančních údajů nebo mechanismy pro získávání zpětné vazby o účinnosti vnitřní kontroly.",
                            "response": null
                        },
                        {
                            "id": "CC2.2",
                            "text": "Existuje formální komunikační proces, který zajišťuje, aby si všichni zaměstnanci byli vědomi svých rolí a povinností v oblasti vnitřní kontroly?",
                            "comment": "Např. formou příspěvků na intranetu, které informují zaměstnance o postupech vnitřní kontroly a jejich konkrétních povinnostech.",
                            "response": null
                        },
                        {
                            "id": "CC2.3",
                            "text": "Jsou zavedeny kanály pro komunikaci s externími stranami, jako jsou zákazníci, regulační orgány a dodavatelé, o otázkách ovlivňujících fungování vnitřní kontroly?",
                            "comment": "Např. struktury pro podávání zpráv za účelem dodržování právních předpisů nebo mechanismy zpětné vazby pro zákazníky, kteří mohou hlásit obavy o bezpečnost.",
                            "response": null
                        },
                        {
                            "id": "CC2.4",
                            "text": "Existuje mechanismus pro rychlou identifikaci, vyhodnocení a sdělení nedostatků vnitřní kontroly příslušným stranám za účelem přijetí nápravných opatření?",
                            "comment": "Může se jednat například o systém hlášení incidentů.",
                            "response": null
                        },
                        {
                            "id": "CC2.5",
                            "text": "Provádí vaše organizace pravidelnou revizi a úpravu svých interních kontrolních komunikačních a informačních procesů v reakci na změny v podnikatelském a provozním prostředí?",
                            "comment": "Především po zavedení významných změn, nových technologií atd.",
                            "response": null
                        },
                    ]
                },
                {
                    "id": "CC3",
                    "title": "Posuzování rizik (CC3)",
                    "questions": [
                        {
                            "id": "CC3.1",
                            "text": "Definuje vaše organizace jasně cíle na různých úrovních, aby bylo možné identifikovat a posoudit rizika související s cíli?",
                            "comment": "Cíle by měly být konkrétní, měřitelné, dosažitelné, relevantní a časově omezené (SMART), aby se usnadnilo účinné hodnocení rizik.",
                            "response": null
                        },
                        {
                            "id": "CC3.2",
                            "text": "Jsou zavedeny postupy pro identifikaci rizik, které mohou ohrozit organizaci a její dosažení cílů?",
                            "comment": "To může zahrnovat pravidelné strategické revize, analýzy SWOT nebo sledování trendů v odvětví.",
                            "response": null
                        },
                        {
                            "id": "CC3.3",
                            "text": "Je zohledňován potenciál dopad podvodu na organizaci při hodnocení rizik?",
                            "comment": "",
                            "response": null
                        },
                        {
                            "id": "CC3.4",
                            "text": "Jsou zavedeny procesy pro identifikaci a vyhodnocování změn ve vnějším a vnitřním prostředí, které by mohly významně ovlivnit systém vnitřní kontroly?",
                            "comment": "Např. sledování regulačních předpisů nebo interních změn jako restrukturalizace.",
                            "response": null
                        },
                    ]
                },
            ],
        },

        {

            "id": "section2",
            "title": "Kritérium: Bezpečnost (Common criteria)",
            "subsections": [
                {
                    "id": "CC4",
                    "title": "Monitoring aktivit (CC4)",
                    "questions": [
                        {
                            "id": "CC4.1",
                            "text": "Provádí vaše organizace pravidelná hodnocení, aby zajistila účinnost vnitřních kontrol?",
                            "comment": "Např. formou interních auditů a systémů průběžného monitorování.",
                            "response": null
                        },
                        {
                            "id": "CC4.2",
                            "text": "Jsou nedostatky ve vnitřní kontrole neprodleně sdělovány osobám odpovědným za nápravná opatření, včetně vrcholového vedení a představenstva?",
                            "comment": "Může se jednat o systémy hlášení incidentů a další obdobné procesy.",
                            "response": null
                        },
                    ]
                },

                {
                    "id": "CC5",
                    "title": "Kontrolní činnost (CC5)",
                    "questions": [
                        {
                            "id": "CC5.1",
                            "text": "Zavedla vaše organizace kontrolní činnosti, které jsou nezbytné pro zmírnění rizik a dosažení cílů?",
                            "comment": "Hledejte konkrétní kontrolní mechanismy, jako jsou kontroly přístupu, schvalování, ověřování, odsouhlasování a oddělení povinností.",
                            "response": null
                        },
                        {
                            "id": "CC5.2",
                            "text": "Jsou zavedeny obecné kontrolní činnosti pro řízení technologií a podporu dosahování cílů?",
                            "comment": "Zvažte kontroly, jako je zabezpečení sítě, zálohování dat a plánování obnovy po havárii.",
                            "response": null
                        },
                        {
                            "id": "CC5.3",
                            "text": "Jsou kontrolní činnosti prováděny prostřednictvím dobře zdokumentovaných zásad a postupů, které jsou sdělovány příslušným zaměstnancům a jsou pro ně srozumitelné?",
                            "comment": "Zkontrolujte, zda existují a jsou šířeny jasné politické dokumenty a procesní pokyny.",
                            "response": null
                        },
                    ]
                },
                {
                    "id": "CC6",
                    "title": "Řízení fyzického a logického přístupu (CC6)",
                    "questions": [
                        {
                            "id": "CC6.1",
                            "text": "Je účinně implementováno zabezpečení logického přístupu k identifikaci, ověřování a omezování přístupu uživatelů k systémovým komponentám?",
                            "comment": "Zaměřte se na software, infrastrukturu a architekturu, které podporují identifikaci, ověřování a omezování přístupu uživatelů.",
                            "response": null
                        },
                        {
                            "id": "CC6.2",
                            "text": "Jsou noví uživatelé před udělením přístupu do systému autorizováni, v případě ukončení jsou ze systému odebráni?",
                            "comment": "",
                            "response": null
                        },
                        {
                            "id": "CC6.3",
                            "text": "Jsou uživatelé při přístupu k systémovým komponentám důsledně identifikováni a ověřováni?",
                            "comment": "To by se mělo týkat jak interních, tak externích uživatelů, kteří přistupují k infrastruktuře, softwaru a datům.",
                            "response": null
                        },
                        {
                            "id": "CC6.4",
                            "text": "Je přístup ke zdrojům IT povolen, upraven nebo odebrán na základě rolí, odpovědností nebo návrhu systému?",
                            "comment": "Změny by měly být v souladu s požadavky na zabezpečení, dostupnost a důvěrnost.",
                            "response": null
                        },
                        {
                            "id": "CC6.5",
                            "text": "Je fyzický přístup do prostor, v nichž je systém umístěn, omezen pouze na oprávněné pracovníky?",
                            "comment": "Zahrnuje datová centra, úložiště záložních médií a další citlivá místa.",
                            "response": null
                        },
                        {
                            "id": "CC6.6",
                            "text": "Jsou zavedena bezpečnostní opatření logického přístupu na ochranu před vnějšími hrozbami?",
                            "comment": "Především hrozby pocházející z vnějšího prostředí systému.",
                            "response": null
                        },
                        {
                            "id": "CC6.7",
                            "text": "Je přenos, pohyb a odstranění informací omezeno na oprávněné uživatele a chráněno?",
                            "comment": "Měla by být zajištěna ochrana při přenosu, přemísťování nebo odstraňování.",
                            "response": null
                        },
                        {
                            "id": "CC6.8",
                            "text": "Jsou zavedeny kontrolní mechanismy, které zabraňují zavedení neoprávněného nebo škodlivého softwaru nebo jej odhalují a reagují na něj?",
                            "comment": "Zaměřte se na mechanismy detekce a reakce na bezpečnostní hrozby související se škodlivým softwarem.",
                            "response": null
                        },
                    ]
                },
            ],
        },
        {
            "id": "section3",
            "title": "Kritérium: Bezpečnost (Common criteria)",
            "subsections": [
                {
                    "id": "CC7",
                    "title": "Provoz informačního systému (CC7)",
                    "questions": [
                        {
                            "id": "CC7.1",
                            "text": "Používá váš subjekt postupy detekce a monitorování k identifikaci nových zranitelností a náchylností vyplývajících ze změn konfigurace nebo nově objevených zranitelností?",
                            "comment": "Zaměřte se na mechanismy včasné detekce a reakce na provozní anomálie, např. IDS, IPS",
                            "response": null
                        },
                        {
                            "id": "CC7.2",
                            "text": "Monitoruje váš subjekt systémové komponenty a operace, zda nedochází k anomáliím naznačujícím bezpečnostní incidenty, přírodní katastrofy nebo chyby?",
                            "comment": "Využívejte nástroje jako SIEM (Security Information and Event Management), IDS (Intrusion Detection System) a software pro detekci anomálií k monitorování a analýze neobvyklých aktivit a hledání potenciálních bezpečnostních událostí.",
                            "response": null
                        },
                        {
                            "id": "CC7.3",
                            "text": "Vyhodnocuje váš subjekt bezpečnostní události, aby zjistil, zda mohou vést nebo vedly k nesplnění cílů, a přijímá příslušná opatření?",
                            "comment": "Využívejte protokoly pro reakci na incidenty a nástroje, jako je digitální forenzní software a platformy pro vyhodnocování hrozeb, k vyhodnocování bezpečnostních událostí.",
                            "response": null
                        },
                        {
                            "id": "CC7.4",
                            "text": "Má váš subjekt definovaný program reakce na incidenty, který je aktivně prováděn za účelem porozumění bezpečnostním incidentům, jejich řešení, nápravy a komunikace o nich?",
                            "comment": "Zajistěte, aby program zahrnoval postupy pro okamžité zamezení šíření, eliminaci hrozeb, opatření pro obnovu a komunikační plány.",
                            "response": null
                        },
                        {
                            "id": "CC7.5",
                            "text": "Má váš subjekt zavedeny postupy pro zotavení po identifikovaných bezpečnostních incidentech?",
                            "comment": "Zaměřte se na vývoj a implementaci plánů obnovy po havárii a strategií kontinuity provozu.",
                            "response": null
                        },
                    ],
                },
                {
                    "id": "CC8",
                    "title": "Řízení změn (CC8)",
                    "questions": [
                        {
                            "id": "CC8.1",
                            "text": "Má váš subjekt komplexní proces řízení změn infrastruktury, dat, softwaru a postupů, který zahrnuje autorizaci, dokumentaci, testování a schvalování?",
                            "comment": "Tyto procesy mohou podpořit nástroje, jako jsou systémy pro správu verzí, software pro automatizované testování a platformy pro správu změn.",
                            "response": null
                        },
                    ]

                },
                {
                    "id": "CC9",
                    "title": "Zvládání rizika (CC9)",
                    "questions": [
                        {
                            "id": "CC9.1",
                            "text": "Identifikuje, vybírá a vyvíjí váš subjekt proaktivně činnosti ke zmírnění rizik v případě možného narušení provozu?",
                            "comment": "Zaměřte se na implementaci strategií plánování kontinuity provozu (BCP) a obnovy po havárii (DR).",
                            "response": null
                        },
                        {
                            "id": "CC9.2",
                            "text": "Posuzuje a řídí váš subjekt aktivně rizika spojená s dodavateli a obchodními partnery?",
                            "comment": "Zajistěte, aby byly stanoveny požadavky na zakázky, pravidelná hodnocení rizik, jasné odpovědnosti vedení a komunikační protokoly. Potvrďte také existenci postupů pro řešení problémů, ukončení vztahů a získání a posouzení závazků týkajících se důvěrnosti a ochrany osobních údajů.",
                            "response": null
                        },
                    ]

                },
            ],
        },
        {

            "id": "section4",
            "title": "Kritérium: Dostupnost",
            "subsections": [
                {
                    "id": "A1",
                    "title": "Dodatečná kritéria pro dostupnost (A1)",
                    "questions": [
                        {
                            "id": "A1.1",
                            "text": "Udržuje, monitoruje a vyhodnocuje váš subjekt aktuální zpracovatelskou kapacitu a využití systémových komponent za účelem efektivního řízení poptávky po kapacitě?",
                            "comment": "Zaměřte se na postupy monitorování infrastruktury, dat a softwaru, abyste zajistili, že zvládnou současnou a plánovanou pracovní zátěž.",
                            "response": null
                        },
                        {
                            "id": "A1.2",
                            "text": "Má váš subjekt komplexní přístup k ochraně životního prostředí, procesům zálohování dat a infrastruktuře pro obnovu, aby byla zajištěna dostupnost systému?",
                            "comment": "V tomto ohledu jsou zásadní nástroje, jako jsou systémy monitorování prostředí, zálohovací řešení a infrastruktura pro obnovení po havárii.",
                            "response": null
                        },
                        {
                            "id": "A1.3",
                            "text": "Testuje váš subjekt pravidelně postupy plánu obnovy, aby zajistil jejich účinnost při podpoře obnovy systému?",
                            "comment": "Zaměřte se na četnost a komplexnost testování plánu obnovy.",
                            "response": null
                        },
                    ],
                },
            ],
        },
        {

            "id": "section5",
            "title": "Kritérium: Důvěrnost",
            "subsections": [
                {
                    "id": "C1",
                    "title": "Dodatečná kritéria pro důvěrnost (C1)",
                    "questions": [
                        {
                            "id": "C1.1",
                            "text": "Vaše společnost efektivně identifikuje a udržuje důvěrné informace, aby zajistila splnění cílů týkajících se důvěrnosti?",
                            "comment": "Zaměřte se na procesy a nástroje používané pro klasifikaci dat, řízení přístupu a šifrování, aby byly důvěrné informace chráněny.",
                            "response": null
                        },
                        {
                            "id": "C1.2",
                            "text": "Likviduje vaše společnost důvěrné informace tak, aby splnila cíle týkající se důvěrnosti?",
                            "comment": "Ujistěte se, že existují procesy a nástroje pro bezpečné odstranění nebo zničení důvěrných informací, které jsou již nadále potřebné.",
                            "response": null
                        },
                    ],
                },
            ],
        },
        {

            "id": "section6",
            "title": "Kritérium: Integrita zpracování",
            "subsections": [
                {
                    "id": "PI1",
                    "title": "Dodatečná kritéria pro integritu zpracování (PI1)",
                    "questions": [
                        {
                            "id": "PI1.1",
                            "text": "Zajišťuje vaše společnost správné získávání, používání a sdílení informací týkajících se zpracování dat?",
                            "comment": "",
                            "response": null
                        },
                        {
                            "id": "PI1.2",
                            "text": "Implementuje vaše společnost politiky a postupy pro systémové vstupy, včetně kontrol úplnosti a přesnosti?",
                            "comment": "Ujistěte se, že existují efektivní mechanismy pro ověřování a zabezpečení vstupních dat do systému.",
                            "response": null
                        },
                        {
                            "id": "PI1.3",
                            "text": "Implementuje vaše společnost politiky a postupy, které povedou k produktům a službám odpovídajícím požadovaným cílům?",
                            "comment": "Zaměřte se na to, zda jsou procesy a postupy pro zpracování dat v systému navrženy tak, aby byly zajištěny správné výstupy v podobě produktů, služeb a reportů.",
                            "response": null
                        },
                        {
                            "id": "PI1.4",
                            "text": "Implementuje vaše společnost politiky a postupy, aby byly výstupy systému poskytovány nebo doručovány úplně, přesně a včas podle specifikací?",
                            "comment": "Ujistěte se, že výstupy, jako jsou reporty, produkty a služby, jsou distribuovány v souladu s požadavky a termíny, což je klíčové pro splnění cílů společnosti",
                            "response": null
                        },
                        {
                            "id": "PI1.5",
                            "text": "Implementuje vaše společnost politiky a postupy pro úplné, přesné a včasné ukládání vstupů, položek ve zpracování a výstupů podle specifikací systému?",
                            "comment": "Zaměřte se na to, zda jsou data během celého zpracovatelského cyklu uchovávána bezpečně a správně, což zahrnuje vstupy, aktuální zpracování i výstupy.",
                            "response": null
                        },
                    ],
                },
            ],
        },
        {

            "id": "section7",
            "title": "Kritérium: Ochrana osobních údajů",
            "subsections": [
                {
                    "id": "P1.0",
                    "title": "Dodatečná kritéria pro ochranu osobních údajů - Oznámení a komunikace (P1.0)",
                    "questions": [
                        {
                            "id": "P1.1",
                            "text": "Poskytuje vaše společnost subjektům údajů informace o praktikách ochrany osobních údajů, včetně účelu sběru, typu sběraných údajů a metod sběru?",
                            "comment": "Ujistěte se, že subjekty údajů jsou informovány o všech klíčových aspektech ochrany osobních údajů, včetně volby a souhlasu, použití, uchování, likvidace, přístupu, zveřejnění třetím stranám, zabezpečení, kvality a metodách sledování a vynucování pravidel ochrany osobních údajů.",
                            "response": null
                        },
                    ],
                },
                {

                    "id": "P2.0",
                    "title": "Dodatečná kritéria pro ochranu osobních údajů - Možnost volby a souhlasu (P2.0)",
                    "questions": [
                        {
                            "id": "P2.1",
                            "text": "Komunikuje vaše společnost subjektům údajů dostupné možnosti týkající se sběru, využití, uchování, zveřejnění a likvidace osobních údajů a získává jejich výslovný souhlas, pokud je to vyžadováno?",
                            "comment": "",
                            "response": null
                        },
                    ],
                },
                {

                    "id": "P3.0",
                    "title": "Dodatečná kritéria pro ochranu osobních údajů - Sběr (P3.0)",
                    "questions": [
                        {
                            "id": "P3.1",
                            "text": "Sbírá vaše společnost osobní údaje v souladu s cíli týkajícími se ochrany soukromí?",
                            "comment": "Pouze za účelem a v rozsahu, který je v souladu s definovanými cíli ochrany soukromí vaší společnosti.",
                            "response": null
                        },
                        {
                            "id": "P3.2",
                            "text": "Informuje vaše společnost subjekty údajů o potřebě výslovného souhlasu a důsledcích jeho neposkytnutí před sběrem osobních údajů?",
                            "comment": "",
                            "response": null
                        },
                    ],
                },
                {

                    "id": "P4.0",
                    "title": "Dodatečná kritéria pro ochranu osobních údajů - Use, retention, and disposal (P4.0)",
                    "questions": [
                        {
                            "id": "P4.1",
                            "text": "Omezuje vaše společnost použití osobních údajů pouze na účely identifikované v cílech týkajících se ochrany soukromí?",
                            "comment": "Ujistěte se, že využívání osobních údajů je striktně omezeno na deklarované účely a že nedochází k jejich zneužití pro jiné aktivity",
                            "response": null
                        },
                        {
                            "id": "P4.2",
                            "text": "Uchovává vaše společnost osobní údaje v souladu s cíli týkajícími se ochrany soukromí?",
                            "comment": "",
                            "response": null
                        },
                        {
                            "id": "P4.3",
                            "text": "Likviduje vaše společnost osobní údaje bezpečným způsobem, aby splnila cíle týkající se ochrany soukromí?",
                            "comment": "",
                            "response": null
                        },
                    ],
                },
                {

                    "id": "P5.0",
                    "title": "Dodatečná kritéria pro ochranu osobních údajů - Přístupy (P5.0)",
                    "questions": [
                        {
                            "id": "P5.1",
                            "text": "Poskytuje vaše společnost identifikovaným a autentizovaným subjektům údajů přístup k jejich uloženým osobním údajům a na vyžádání jim poskytuje fyzické nebo elektronické kopie těchto údajů?",
                            "comment": "",
                            "response": null
                        },
                        {
                            "id": "P5.2",
                            "text": "Opravuje, upravuje nebo doplňuje vaše společnost osobní údaje na základě informací poskytnutých subjekty údajů a komunikuje tyto informace třetím stranám, pokud je to požadováno nebo slíbeno?",
                            "comment": "Ujistěte se, že subjekty údajů mají možnost požádat o korekci svých osobních údajů a že jsou informovány o důvodech zamítnutí takového požadavku.",
                            "response": null
                        },
                    ],
                },
                {

                    "id": "P6.0",
                    "title": "Dodatečná kritéria pro ochranu osobních údajů - Zveřejnění a oznámení (P6.0)",
                    "questions": [
                        {
                            "id": "P6.1",
                            "text": "Zveřejňuje vaše společnost osobní údaje třetím stranám s výslovným souhlasem subjektů údajů, který je získán před zveřejněním?",
                            "comment": "Ujistěte se, že před předáním jakýchkoli osobních údajů třetím stranám je získán explicitní souhlas od subjektů údajů.",
                            "response": null
                        },
                        {
                            "id": "P6.2",
                            "text": "Vytváří a uchovává vaše společnost úplný, přesný a včasný záznam o autorizovaných zveřejněních osobních údajů?",
                            "comment": "Zaměřte se na to, zda je vedena důkladná evidence o všech zveřejněních osobních údajů, včetně informací o tom, komu, kdy a za jakých podmínek byly údaje poskytnuty.",
                            "response": null
                        },
                        {
                            "id": "P6.3",
                            "text": "Vytváří a uchovává vaše společnost úplný, přesný a včasný záznam o zjištěných nebo nahlášených neoprávněných zveřejněních osobních údajů?",
                            "comment": "Ujistěte se, že máte proces pro detekci a zaznamenávání bezpečnostních incidentů, včetně úniků a neoprávněného zveřejnění osobních údajů, a že tyto informace jsou správně a včas evidovány.",
                            "response": null
                        },
                        {
                            "id": "P6.4",
                            "text": "Získává vaše společnost závazky k ochraně soukromí od dodavatelů a dalších třetích stran, které mají přístup k osobním údajům, a pravidelně hodnotí jejich dodržování?",
                            "comment": "Ujistěte se, že máte procesy pro získávání a pravidelné hodnocení závazků k ochraně soukromí od třetích stran, které mají přístup k osobním údajům, a že přijímáte nápravná opatření v případě nedostatků.",
                            "response": null
                        },
                        {
                            "id": "P6.5",
                            "text": "Získává vaše společnost závazky od dodavatelů a dalších třetích stran s přístupem k osobním údajům, že vás upozorní v případě skutečného nebo podezřelého neoprávněného zveřejnění osobních údajů?",
                            "comment": "Ujistěte se, že existují procesy, podle kterých třetí strany informují vaši společnost o jakýchkoli incidentech souvisejících s únikem osobních údajů, a že tato upozornění jsou řádně zpracovávána v souladu s postupy pro reakci na incidenty.",
                            "response": null
                        },
                        {
                            "id": "P6.6",
                            "text": "Poskytuje vaše společnost oznámení o porušeních a incidentech dotčeným subjektům údajů, regulátorům a dalším stranám v souladu s cíli týkajícími se ochrany soukromí?",
                            "comment": "Ujistěte se, že máte postupy pro informování dotčených stran, včetně subjektů údajů a regulačních orgánů, o jakýchkoli bezpečnostních incidentech nebo únicích dat, které by mohly ovlivnit jejich soukromí.",
                            "response": null
                        },
                        {
                            "id": "P6.7",
                            "text": "Poskytuje vaše společnost subjektům údajů přehled o držených osobních údajích a informace o zveřejnění jejich osobních údajů na jejich žádost?",
                            "comment": "Ujistěte se, že subjekty údajů mají možnost požádat o korekci svých osobních údajů a že jsou informovány o důvodech zamítnutí takového požadavku.",
                            "response": null
                        },
                    ],
                }
            ],
        },
        {

            "id": "section8",
            "title": "Kritérium: Ochrana osobních údajů",
            "subsections": [
                {
                    "id": "P7.0",
                    "title": "Dodatečná kritéria pro ochranu osobních údajů - Kvalita (P7.0)",
                    "questions": [
                        {
                            "id": "P7.1",
                            "text": "Sbírá a udržuje vaše společnost přesné, aktuální, úplné a relevantní osobní údaje?",
                            "comment": "Zajistěte, že procesy sběru a udržování osobních údajů jsou navrženy tak, aby zajistily jejich přesnost, aktuálnost, úplnost a relevanci v souladu s cíli ochrany soukromí vaší společnosti.",
                            "response": null
                        },
                    ],
                },
                {
                    "id": "P8.0",
                    "title": "Dodatečná kritéria pro ochranu osobních údajů - Monitorování a prosazování (P8.0)",
                    "questions": [
                        {
                            "id": "P8.1",
                            "text": "Má vaše společnost proces pro přijímání, řešení a komunikaci výsledků dotazů, stížností a sporů od subjektů údajů a dalších stran a pravidelně monitoruje dodržování pravidel?",
                            "comment": "Ujistěte se, že existuje efektivní proces pro řešení dotazů a stížností souvisejících s ochranou soukromí a že jsou případné nedostatky řešeny včas.",
                            "response": null
                        },
                    ],
                },
            ],
        },
    ],
}

/*Funkce displaySection je volána s dvěma argumenty: sectionId a containerId. sectionId je ID oddílu, 
který chcete zobrazit, a containerId je ID HTML elementu, ve kterém chcete oddíl zobrazit. 
Pokud containerId není poskytnuto, použije se výchozí hodnota 'questionnaireContainer'.*/

// Proměnná sledující, zda uživatel zahájil vyplňování dotazníku
let hasStartedQuestionnaire = false;

function displaySection(sectionId, containerId) {
    const container = document.getElementById(containerId || 'questionnaireContainer');
    container.innerHTML = '';

    const section = questionnaireData.sections.find(s => s.id === sectionId);
    if (!section) return;

    /*Tvorba elementů HTML*/
    /*Název sekce*/
    const sectionElement = document.createElement('div');
    sectionElement.className = "section";

    const titleElement = document.createElement('h4');
    titleElement.textContent = section.title;
    sectionElement.appendChild(titleElement);

    const optionsDescription = ["Ano", "Částečně", "Ne", "Neaplikováno"];

    section.subsections.forEach(subsection => {
        const subsectionElement = document.createElement('div');
        subsectionElement.className = "card shadow mb-4";

        const headerElement = document.createElement('div');
        headerElement.className = "card-header py-3";
        const headerTitleElement = document.createElement('h6');
        headerTitleElement.className = "m-0 font-weight-bold text-primary";
        headerTitleElement.textContent = subsection.title;
        headerElement.appendChild(headerTitleElement);
        subsectionElement.appendChild(headerElement);

        const bodyElement = document.createElement('div');
        bodyElement.className = "card-body";

        subsection.questions.forEach((question, qIndex) => {
            const questionWrapper = document.createElement('div');
            questionWrapper.style.marginBottom = '30px';  // Přidáný řádek
            const questionElement = document.createElement('span');
            questionElement.style.fontWeight = 'bold';
            questionElement.textContent = question.text;
            questionWrapper.appendChild(questionElement);

            if (question.comment) {
                const commentElement = document.createElement('li');
                commentElement.textContent = question.comment;
                commentElement.style.marginTop = '5px';
                questionWrapper.appendChild(commentElement);
            }

            const optionsWrapper = document.createElement('div');
            optionsWrapper.style.textAlign = 'center';
            optionsWrapper.style.marginTop = '20px';
            optionsDescription.forEach((option, index) => {
                const radioElement = document.createElement('input');
                radioElement.type = "radio";
                radioElement.name = `question_${subsection.id}_${qIndex}`;
                radioElement.value = option;
                radioElement.style.marginLeft = '20px';
                radioElement.style.marginRight = '10px';
                radioElement.style.transform = 'scale(1.7)';
                radioElement.addEventListener('change', function () {
                    if (this.checked) {
                        question.response = option;
                        hasStartedQuestionnaire = true;  // Nastaví hasStartedQuestionnaire na true, jakmile uživatel zvolí odpověď
                    }
                });
                optionsWrapper.appendChild(radioElement);

                const label = document.createElement('label');
                label.htmlFor = radioElement.id;
                label.textContent = option;
                label.style.marginRight = '100px';
                optionsWrapper.appendChild(label);

                // Tooltip vysvětlující "Neaplikováno"
                if (option === "Neaplikováno") {
                    const tooltipWrapper = document.createElement('div');
                    tooltipWrapper.className = "info-tooltip";

                    const iconElement = document.createElement('i');
                    iconElement.className = "fas fa-info-circle";
                    iconElement.style.marginLeft = '5px';  // Adjust as needed
                    tooltipWrapper.appendChild(iconElement);

                    const tooltipTextElement = document.createElement('span');
                    tooltipTextElement.className = "tooltiptext bottom";
                    tooltipTextElement.textContent = "Opatření není pro organizaci relevantní";
                    tooltipWrapper.appendChild(tooltipTextElement);

                    label.appendChild(tooltipWrapper);
                }
                // Tooltip vysvětlující "Ano"
                if (option === "Ano") {
                    const tooltipWrapper = document.createElement('div');
                    tooltipWrapper.className = "info-tooltip";

                    const iconElement = document.createElement('i');
                    iconElement.className = "fas fa-info-circle";
                    iconElement.style.marginLeft = '5px';  // Adjust as needed
                    tooltipWrapper.appendChild(iconElement);

                    const tooltipTextElement = document.createElement('span');
                    tooltipTextElement.className = "tooltiptext bottom";
                    tooltipTextElement.textContent = "Opatření máte plně zavedeno a dokumentováno";
                    tooltipWrapper.appendChild(tooltipTextElement);

                    label.appendChild(tooltipWrapper);
                }
                // Tooltip vysvětlující "Ano"
                if (option === "Částečně") {
                    const tooltipWrapper = document.createElement('div');
                    tooltipWrapper.className = "info-tooltip";

                    const iconElement = document.createElement('i');
                    iconElement.className = "fas fa-info-circle";
                    iconElement.style.marginLeft = '5px';  // Adjust as needed
                    tooltipWrapper.appendChild(iconElement);

                    const tooltipTextElement = document.createElement('span');
                    tooltipTextElement.className = "tooltiptext bottom";
                    tooltipTextElement.textContent = "Některé aspekty opatření jsou zavedeny, ale ne všechny";
                    tooltipWrapper.appendChild(tooltipTextElement);

                    label.appendChild(tooltipWrapper);
                }
                // Tooltip vysvětlující "Ano"
                if (option === "Ne") {
                    const tooltipWrapper = document.createElement('div');
                    tooltipWrapper.className = "info-tooltip";

                    const iconElement = document.createElement('i');
                    iconElement.className = "fas fa-info-circle";
                    iconElement.style.marginLeft = '5px';  // Adjust as needed
                    tooltipWrapper.appendChild(iconElement);

                    const tooltipTextElement = document.createElement('span');
                    tooltipTextElement.className = "tooltiptext bottom";
                    tooltipTextElement.textContent = "Opatření není vůbec zavedeno";
                    tooltipWrapper.appendChild(tooltipTextElement);

                    label.appendChild(tooltipWrapper);
                }
            });

            questionWrapper.appendChild(optionsWrapper);

            // Pokud není aktuální otázka poslední v daném subsection
            if (qIndex !== subsection.questions.length - 1) {
                const hrElement = document.createElement('hr');
                questionWrapper.appendChild(hrElement);
            }

            bodyElement.appendChild(questionWrapper);


        });

        subsectionElement.appendChild(bodyElement);
        sectionElement.appendChild(subsectionElement);
    });

    container.appendChild(sectionElement);
}

window.onload = function () {
    displaySection('section1', 'questionnaireContainer1');
    displaySection('section2', 'questionnaireContainer2');
    displaySection('section3', 'questionnaireContainer3');
    displaySection('section4', 'questionnaireContainer4');
    displaySection('section5', 'questionnaireContainer5');
    displaySection('section6', 'questionnaireContainer6');
    displaySection('section7', 'questionnaireContainer7');
    displaySection('section8', 'questionnaireContainer8');
}

// Funkce, která zobrazí výzvu, pokud uživatel pokusí opustit stránku po zahájení vyplňování dotazníku
window.onbeforeunload = function (event) {
    if (hasStartedQuestionnaire) {
        const message = "Opravdu chcete opustit stránku? Veškerý váš pokrok bude ztracen.";
        event.returnValue = message;
        return message;
    }
};
